# åŒ App æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ¶æ„æ¦‚è¿°

æœ¬é¡¹ç›®é‡‡ç”¨**åŒ App æ¶æ„**ï¼Œå°†å†·é’±åŒ…å’Œçƒ­é’±åŒ…å®Œå…¨åˆ†ç¦»ï¼Œç¡®ä¿æœ€é«˜çº§åˆ«çš„å®‰å…¨æ€§ã€‚

```
offline-wallet/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ cold-wallet/          # å†·é’±åŒ… Appï¼ˆå®Œå…¨ç¦»çº¿ï¼‰
â”‚   â”œâ”€â”€ hot-wallet/           # çƒ­é’±åŒ… Appï¼ˆè”ç½‘ï¼‰
â”‚   â””â”€â”€ shared/               # å…±äº«ä»£ç 
â”‚       â”œâ”€â”€ src/              # TypeScript å…±äº«ä»£ç 
â”‚       â””â”€â”€ src-tauri/src/    # Rust å…±äº«ä»£ç 
```

## ğŸ” å†·é’±åŒ… (Cold Wallet)

### åŠŸèƒ½å®šä½

- **å®Œå…¨ç¦»çº¿**ï¼šæ— ä»»ä½•ç½‘ç»œæƒé™
- **ç§é’¥ç®¡ç†**ï¼šç”Ÿæˆã€å­˜å‚¨ã€ç­¾å
- **äºŒç»´ç ç”Ÿæˆ**ï¼šåœ°å€ã€ç­¾åäº¤æ˜“

### æ ¸å¿ƒåŠŸèƒ½

1. âœ… åŠ©è®°è¯ç”Ÿæˆ/å¯¼å…¥
2. âœ… ç§é’¥åŠ å¯†å­˜å‚¨ï¼ˆç³»ç»Ÿçº§ Keychain/Keystoreï¼‰
3. âœ… åœ°å€ç”Ÿæˆå’Œæ˜¾ç¤º
4. âœ… äº¤æ˜“ç­¾åï¼ˆç¦»çº¿ï¼‰
5. âœ… äºŒç»´ç ç”Ÿæˆ
6. âœ… å¤‡ä»½/æ¢å¤

### å®‰å…¨é…ç½®

```json
{
  "security": {
    "csp": "connect-src 'none';" // å®Œå…¨ç¦ç”¨ç½‘ç»œ
  }
}
```

### æŠ€æœ¯æ ˆ

- **å‰ç«¯**: React + Ant Design Mobile + Zustand
- **åç«¯**: Rust + Tauri 2.0
- **åŠ å¯†**: AES-256-GCM + Argon2id
- **å­˜å‚¨**: Keychain/Keystore

## ğŸ”¥ çƒ­é’±åŒ… (Hot Wallet)

### åŠŸèƒ½å®šä½

- **è”ç½‘åŠŸèƒ½**ï¼šä½™é¢æŸ¥è¯¢ã€äº¤æ˜“å¹¿æ’­
- **äºŒç»´ç æ‰«æ**ï¼šæ¥æ”¶å†·é’±åŒ…ç­¾å
- **åŒºå—é“¾äº¤äº’**ï¼šRPC è°ƒç”¨

### æ ¸å¿ƒåŠŸèƒ½

1. âœ… ä½™é¢æŸ¥è¯¢ï¼ˆå¤šé“¾ï¼‰
2. âœ… äº¤æ˜“å¹¿æ’­
3. âœ… äº¤æ˜“å†å²æŸ¥è¯¢
4. âœ… äºŒç»´ç æ‰«æ
5. âœ… Gas è´¹ä¼°ç®—
6. âœ… åŒºå—é“¾æµè§ˆå™¨é“¾æ¥

### å®‰å…¨é…ç½®

```json
{
  "security": {
    "csp": "connect-src 'self' https:;" // å…è®¸ HTTPS è¿æ¥
  }
}
```

### æŠ€æœ¯æ ˆ

- **å‰ç«¯**: React + Ant Design Mobile + Zustand
- **åç«¯**: Rust + Tauri 2.0 + reqwest
- **ç½‘ç»œ**: HTTP/HTTPS RPC è°ƒç”¨

## ğŸ“¡ é€šä¿¡åè®®ï¼ˆäºŒç»´ç ï¼‰

### åè®®ç‰ˆæœ¬

å½“å‰ç‰ˆæœ¬ï¼š`1.0.0`

### æ•°æ®ç±»å‹

#### 1. åœ°å€äºŒç»´ç 

```json
{
  "type": "address",
  "version": "1.0.0",
  "timestamp": 1234567890,
  "chain": "eth",
  "address": "0x...",
  "label": "æ”¶æ¬¾åœ°å€"
}
```

#### 2. ç­¾åäº¤æ˜“äºŒç»´ç 

```json
{
  "type": "signed_tx",
  "version": "1.0.0",
  "timestamp": 1234567890,
  "chain": "eth",
  "signedTx": "{...}",
  "txHash": "0x..."
}
```

#### 3. æœªç­¾åäº¤æ˜“äºŒç»´ç ï¼ˆçƒ­é’±åŒ… -> å†·é’±åŒ…ï¼‰

```json
{
  "type": "unsigned_tx",
  "version": "1.0.0",
  "timestamp": 1234567890,
  "chain": "eth",
  "unsignedTx": "{...}",
  "description": "è½¬è´¦è¯´æ˜"
}
```

### é€šä¿¡æµç¨‹

#### åœºæ™¯ 1ï¼šæŸ¥çœ‹åœ°å€

```
å†·é’±åŒ…ï¼šç”Ÿæˆåœ°å€ â†’ ç”ŸæˆäºŒç»´ç  â†’ æ˜¾ç¤º
çƒ­é’±åŒ…ï¼šæ‰«æäºŒç»´ç  â†’ æ˜¾ç¤ºåœ°å€ â†’ æŸ¥è¯¢ä½™é¢
```

#### åœºæ™¯ 2ï¼šå‘é€äº¤æ˜“

```
1. çƒ­é’±åŒ…ï¼šæ„å»ºæœªç­¾åäº¤æ˜“ â†’ ç”ŸæˆäºŒç»´ç 
2. å†·é’±åŒ…ï¼šæ‰«æäºŒç»´ç  â†’ ç­¾åäº¤æ˜“ â†’ ç”Ÿæˆç­¾åäº¤æ˜“äºŒç»´ç 
3. çƒ­é’±åŒ…ï¼šæ‰«æç­¾åäº¤æ˜“äºŒç»´ç  â†’ å¹¿æ’­äº¤æ˜“
```

## ğŸ”’ å®‰å…¨è®¾è®¡

### å†·é’±åŒ…å®‰å…¨æªæ–½

1. âœ… **å®Œå…¨ç¦»çº¿**ï¼šCSP ç¦ç”¨æ‰€æœ‰ç½‘ç»œè¿æ¥
2. âœ… **ç³»ç»Ÿçº§åŠ å¯†å­˜å‚¨**ï¼šä½¿ç”¨ Keychain/Keystore
3. âœ… **å†…å­˜å³æ—¶æ“¦é™¤**ï¼šç­¾ååç«‹å³æ¸…é™¤æ•æ„Ÿæ•°æ®
4. âœ… **è‡ªåŠ¨é”å®š**ï¼šæ— æ´»åŠ¨è‡ªåŠ¨é”å®š
5. âœ… **ç”Ÿç‰©è¯†åˆ«**ï¼šFace ID / Touch ID ä¿æŠ¤

### çƒ­é’±åŒ…å®‰å…¨æªæ–½

1. âœ… **ä¸å­˜å‚¨ç§é’¥**ï¼šä»…å¤„ç†å·²ç­¾åçš„äº¤æ˜“
2. âœ… **äº¤æ˜“éªŒè¯**ï¼šéªŒè¯äº¤æ˜“æ ¼å¼å’Œç­¾å
3. âœ… **HTTPS è¿æ¥**ï¼šæ‰€æœ‰ç½‘ç»œè¯·æ±‚ä½¿ç”¨ HTTPS
4. âœ… **ç”¨æˆ·ç¡®è®¤**ï¼šå¹¿æ’­å‰éœ€è¦ç”¨æˆ·ç¡®è®¤

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
packages/
â”œâ”€â”€ cold-wallet/
â”‚   â”œâ”€â”€ src/                    # React å‰ç«¯
â”‚   â”‚   â”œâ”€â”€ pages/              # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/         # ç»„ä»¶
â”‚   â”‚   â””â”€â”€ stores/            # Zustand çŠ¶æ€
â”‚   â””â”€â”€ src-tauri/src/          # Rust åç«¯
â”‚       â”œâ”€â”€ crypto/             # åŠ å¯†æ¨¡å—
â”‚       â”œâ”€â”€ qrcode.rs          # äºŒç»´ç ç”Ÿæˆ
â”‚       â””â”€â”€ main.rs            # Tauri å…¥å£
â”‚
â”œâ”€â”€ hot-wallet/
â”‚   â”œâ”€â”€ src/                    # React å‰ç«¯
â”‚   â”‚   â”œâ”€â”€ pages/              # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/         # ç»„ä»¶ï¼ˆäºŒç»´ç æ‰«æï¼‰
â”‚   â”‚   â””â”€â”€ stores/            # Zustand çŠ¶æ€
â”‚   â””â”€â”€ src-tauri/src/          # Rust åç«¯
â”‚       â”œâ”€â”€ qrcode.rs          # äºŒç»´ç è§£æ
â”‚       â”œâ”€â”€ blockchain.rs      # åŒºå—é“¾äº¤äº’
â”‚       â””â”€â”€ main.rs            # Tauri å…¥å£
â”‚
â””â”€â”€ shared/
    â”œâ”€â”€ src/                    # TypeScript å…±äº«
    â”‚   â””â”€â”€ types/             # ç±»å‹å®šä¹‰
    â””â”€â”€ src-tauri/src/          # Rust å…±äº«
        â””â”€â”€ chains/            # é“¾ç›¸å…³ä»£ç 
```

## ğŸš€ å¼€å‘æŒ‡å—

### å¯åŠ¨å†·é’±åŒ…

```bash
cd packages/cold-wallet
pnpm install
pnpm dev
```

### å¯åŠ¨çƒ­é’±åŒ…

```bash
cd packages/hot-wallet
pnpm install
pnpm dev
```

### æ„å»º

```bash
# æ„å»ºå†·é’±åŒ…
cd packages/cold-wallet
pnpm tauri build

# æ„å»ºçƒ­é’±åŒ…
cd packages/hot-wallet
pnpm tauri build
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å†·é’±åŒ…ç»å¯¹ä¸èƒ½è”ç½‘**ï¼šç¡®ä¿ CSP é…ç½®æ­£ç¡®
2. **çƒ­é’±åŒ…ä¸å­˜å‚¨ç§é’¥**ï¼šä»…å¤„ç†å·²ç­¾åæ•°æ®
3. **äºŒç»´ç åè®®ç‰ˆæœ¬**ï¼šä¿æŒå…¼å®¹æ€§
4. **æµ‹è¯•æµç¨‹**ï¼šå®Œæ•´æµ‹è¯•äºŒç»´ç é€šä¿¡æµç¨‹

## ğŸ”„ æœªæ¥æ‰©å±•

- [ ] NFC é€šä¿¡æ”¯æŒï¼ˆç§»åŠ¨ç«¯ï¼‰
- [ ] è“ç‰™é€šä¿¡æ”¯æŒï¼ˆæ¡Œé¢ç«¯ï¼‰
- [ ] å¤šè®¾å¤‡åŒæ­¥ï¼ˆé€šè¿‡äºŒç»´ç ï¼‰
- [ ] äº¤æ˜“æ¨¡æ¿ä¿å­˜
- [ ] æ‰¹é‡äº¤æ˜“æ”¯æŒ
